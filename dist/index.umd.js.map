{"version":3,"file":"index.umd.js","sources":["../src/Skeleton/useSkeletonValue.ts","../src/Skeleton/index.tsx"],"sourcesContent":["/**\n *\n * useSkeletonValue\n *\n */\n// @ts-ignore\nimport Animated, { Easing } from 'react-native-reanimated';\nimport { IUseSkeletonValueProps } from '../types';\n\nconst {\n  Clock,\n  Value,\n  useCode,\n  set,\n  block,\n  cond,\n  startClock,\n  clockRunning,\n  not,\n  eq,\n  timing,\n} = Animated;\n\ntype IRunTimingProps = {\n  clock: Animated.Clock;\n  speed: number;\n};\n\nconst runTiming = ({ clock, speed }: IRunTimingProps) => {\n  const state = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0),\n  };\n  const config = {\n    toValue: new Value(1),\n    duration: speed,\n    easing: Easing.inOut(Easing.ease),\n  };\n  return block([\n    cond(\n      not(clockRunning(clock)),\n      startClock(clock),\n      timing(clock, state, config),\n    ),\n    cond(eq(state.finished, 1), [\n      set(state.finished, 0),\n      set(state.frameTime, 0),\n      set(state.time, 0),\n      set(config.toValue, cond(eq(state.position, 1), 0, 1)),\n    ]),\n    state.position,\n  ]);\n};\n\nconst useSkeletonValue = ({ speed = 1000 }: IUseSkeletonValueProps = {}) => {\n  const progress = new Value(0);\n  const clock = new Clock();\n\n  useCode(() => block([set(progress, runTiming({ clock, speed }))]), [\n    progress,\n  ]);\n  return progress;\n};\n\nexport default useSkeletonValue;\n","/**\n *\n * Loader\n *\n */\nimport React from 'react';\n// @ts-ignore\nimport { View } from 'react-native';\n// @ts-ignore\nimport Animated from 'react-native-reanimated';\n\nimport { ISkeletonProps } from '../types';\nimport useSkeletonValue from './useSkeletonValue';\n\nconst { interpolate, Extrapolate } = Animated;\n\nconst Skeleton: React.FC<ISkeletonProps> = ({\n  loaderStyle = {},\n  numberOfItems = 3,\n  direction = 'row',\n  speed = 1000,\n}) => {\n  const progress: Animated.Value<number> = useSkeletonValue({ speed });\n  const length = numberOfItems;\n  const delta = 1 / length;\n\n  return (\n    <View style={{ flexDirection: direction }}>\n      {Array.from(Array(numberOfItems), (_a, i) => {\n        const start = i * delta;\n        const end = start + delta;\n        const opacity = interpolate(progress, {\n          inputRange: [start, end],\n          outputRange: [0.5, 1],\n          extrapolate: Extrapolate.CLAMP,\n        });\n        return (\n          <Animated.View\n            key={`s${i}`}\n            style={[{ ...loaderStyle }, { opacity }]}\n          />\n        );\n      })}\n    </View>\n  );\n};\nexport default Skeleton;\n\nexport { useSkeletonValue };\n"],"names":["Animated","Easing","View"],"mappings":"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"}