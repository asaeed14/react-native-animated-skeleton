{"version":3,"file":"index.es5.js","sources":["../src/Skeleton/useSkeletonValue.ts","../src/Skeleton/index.tsx"],"sourcesContent":["/**\n *\n * useSkeletonValue\n *\n */\n// @ts-ignore\nimport Animated, { Easing } from 'react-native-reanimated';\nimport { IUseSkeletonValueProps } from '../types';\n\nconst {\n  Clock,\n  Value,\n  useCode,\n  set,\n  block,\n  cond,\n  startClock,\n  clockRunning,\n  not,\n  eq,\n  timing,\n} = Animated;\n\ntype IRunTimingProps = {\n  clock: Animated.Clock;\n  speed: number;\n};\n\nconst runTiming = ({ clock, speed }: IRunTimingProps) => {\n  const state = {\n    finished: new Value(0),\n    position: new Value(0),\n    time: new Value(0),\n    frameTime: new Value(0),\n  };\n  const config = {\n    toValue: new Value(1),\n    duration: speed,\n    easing: Easing.inOut(Easing.ease),\n  };\n  return block([\n    cond(\n      not(clockRunning(clock)),\n      startClock(clock),\n      timing(clock, state, config),\n    ),\n    cond(eq(state.finished, 1), [\n      set(state.finished, 0),\n      set(state.frameTime, 0),\n      set(state.time, 0),\n      set(config.toValue, cond(eq(state.position, 1), 0, 1)),\n    ]),\n    state.position,\n  ]);\n};\n\nconst useSkeletonValue = ({ speed = 1000 }: IUseSkeletonValueProps = {}) => {\n  const progress = new Value(0);\n  const clock = new Clock();\n\n  useCode(() => block([set(progress, runTiming({ clock, speed }))]), [\n    progress,\n  ]);\n  return progress;\n};\n\nexport default useSkeletonValue;\n","/**\n *\n * Loader\n *\n */\nimport React from 'react';\n// @ts-ignore\nimport { View } from 'react-native';\n// @ts-ignore\nimport Animated from 'react-native-reanimated';\n\nimport { ISkeletonProps } from '../types';\nimport useSkeletonValue from './useSkeletonValue';\n\nconst { interpolate, Extrapolate } = Animated;\n\nconst Skeleton: React.FC<ISkeletonProps> = ({\n  loaderStyle = {},\n  numberOfItems = 3,\n  direction = 'row',\n  speed = 1000,\n}) => {\n  const progress: Animated.Value<number> = useSkeletonValue({ speed });\n  const length = numberOfItems;\n  const delta = 1 / length;\n\n  return (\n    <View style={{ flexDirection: direction }}>\n      {Array.from(Array(numberOfItems), (_a, i) => {\n        const start = i * delta;\n        const end = start + delta;\n        const opacity = interpolate(progress, {\n          inputRange: [start, end],\n          outputRange: [0.5, 1],\n          extrapolate: Extrapolate.CLAMP,\n        });\n        return (\n          <Animated.View\n            key={`s${i}`}\n            style={[{ ...loaderStyle }, { opacity }]}\n          />\n        );\n      })}\n    </View>\n  );\n};\nexport default Skeleton;\n\nexport { useSkeletonValue };\n"],"names":[],"mappings":"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"}